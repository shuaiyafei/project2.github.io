import{o as e,f as o,g as t,m as s,l as i,y as r,z as a,A as n,B as l}from"./vue-b065e30f.js";import{_ as d}from"./index-5cea4287.js";const h=["width","height","preload","poster"],u=["src"],g={key:0,class:"play-icon",viewBox:"0 0 24 24",fill:"currentColor"},m={key:1,class:"pause-icon",viewBox:"0 0 24 24",fill:"currentColor"},p={class:"time-display"},c={class:"current-time"},v={class:"duration"};const y=d({name:"VideoPlayer",props:{src:{type:String,required:!0},poster:{type:String,default:""},width:{type:String,default:"100%"},height:{type:String,default:"auto"},preload:{type:String,default:"none"},videoDuration:{type:Number,default:0}},data(){return{isPlaying:!1,showControls:!0,hideControlsTimer:null,currentTime:0,duration:this.videoDuration||0,isDragging:!1,showHandle:!1}},computed:{progressPercent(){return 0===this.duration?0:this.currentTime/this.duration*100}},mounted(){"complete"===document.readyState?this.preloadVideo():window.addEventListener("load",this.preloadVideo)},beforeUnmount(){this.clearHideTimer(),document.removeEventListener("mousemove",this.onGlobalDrag),document.removeEventListener("mouseup",this.onGlobalDragEnd),window.removeEventListener("load",this.preloadVideo)},methods:{togglePlay(){const e=this.$refs.videoPlayer;e&&(e.paused?e.play():e.pause())},onPlay(){this.isPlaying=!0,this.startHideTimer()},onPause(){this.isPlaying=!1,this.clearHideTimer(),this.showControls=!0},onTimeUpdate(){const e=this.$refs.videoPlayer;e&&(this.currentTime=e.currentTime)},onLoadedMetadata(){const e=this.$refs.videoPlayer;e&&!this.videoDuration&&(this.duration=e.duration)},formatTime(e){if(isNaN(e)||0===e)return"0:00";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`},onMouseEnter(){this.showControls=!0,this.clearHideTimer()},onMouseLeave(){this.isPlaying?this.startHideTimer():this.showControls=!0},onMouseMove(){this.showControls=!0,this.clearHideTimer(),this.isPlaying&&!this.isDragging&&this.startHideTimer()},startHideTimer(){this.clearHideTimer(),this.hideControlsTimer=setTimeout(()=>{this.isPlaying&&(this.showControls=!1)},2e3)},clearHideTimer(){this.hideControlsTimer&&(clearTimeout(this.hideControlsTimer),this.hideControlsTimer=null)},seekToPosition(e){if(0===this.duration)return;const o=this.$refs.progressBar.getBoundingClientRect(),t=e.clientX-o.left,s=Math.max(0,Math.min(1,t/o.width)),i=this.$refs.videoPlayer;i&&(i.currentTime=s*this.duration)},startDrag(e){this.isDragging=!0,this.showHandle=!0,this.clearHideTimer(),this.seekToPosition(e),document.addEventListener("mousemove",this.onGlobalDrag),document.addEventListener("mouseup",this.onGlobalDragEnd)},onDrag(e){this.isDragging&&this.seekToPosition(e)},onGlobalDrag(e){if(this.isDragging){const o=this.$refs.progressBar.getBoundingClientRect(),t=e.clientX-o.left,s=Math.max(0,Math.min(1,t/o.width)),i=this.$refs.videoPlayer;i&&(i.currentTime=s*this.duration)}},stopDrag(){this.isDragging&&(this.isDragging=!1,this.showHandle=!1,document.removeEventListener("mousemove",this.onGlobalDrag),document.removeEventListener("mouseup",this.onGlobalDragEnd),this.isPlaying&&this.startHideTimer())},onGlobalDragEnd(){this.stopDrag()},preloadVideo(){const e=this.$refs.videoPlayer;e&&"none"===e.preload&&(e.preload="metadata")}}},[["render",function(d,y,P,T,f,D){return e(),o("div",{class:"video-player-wrapper",onMouseenter:y[10]||(y[10]=(...e)=>D.onMouseEnter&&D.onMouseEnter(...e)),onMouseleave:y[11]||(y[11]=(...e)=>D.onMouseLeave&&D.onMouseLeave(...e)),onMousemove:y[12]||(y[12]=(...e)=>D.onMouseMove&&D.onMouseMove(...e))},[t("video",{ref:"videoPlayer",width:P.width,height:P.height,preload:P.preload,poster:P.poster,onTimeupdate:y[0]||(y[0]=(...e)=>D.onTimeUpdate&&D.onTimeUpdate(...e)),onLoadedmetadata:y[1]||(y[1]=(...e)=>D.onLoadedMetadata&&D.onLoadedMetadata(...e)),onPlay:y[2]||(y[2]=(...e)=>D.onPlay&&D.onPlay(...e)),onPause:y[3]||(y[3]=(...e)=>D.onPause&&D.onPause(...e))},[t("source",{src:P.src,type:"video/mp4"},null,8,u),y[13]||(y[13]=s(" Your browser does not support the video tag. ",-1))],40,h),t("div",{class:i(["video-controls",{hidden:!f.showControls&&f.isPlaying}])},[t("button",{class:i(["play-btn",{playing:f.isPlaying}]),onClick:y[4]||(y[4]=(...e)=>D.togglePlay&&D.togglePlay(...e))},[f.isPlaying?(e(),o("svg",m,[...y[15]||(y[15]=[t("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"},null,-1)])])):(e(),o("svg",g,[...y[14]||(y[14]=[t("path",{d:"M8 5v14l11-7z"},null,-1)])]))],2)],2),r(t("div",{class:i(["video-progress-bar",{hidden:!f.showControls&&f.isPlaying}])},[t("div",{class:"progress-bar",onClick:y[5]||(y[5]=(...e)=>D.seekToPosition&&D.seekToPosition(...e)),onMousedown:y[6]||(y[6]=(...e)=>D.startDrag&&D.startDrag(...e)),onMousemove:y[7]||(y[7]=(...e)=>D.onDrag&&D.onDrag(...e)),onMouseup:y[8]||(y[8]=(...e)=>D.stopDrag&&D.stopDrag(...e)),onMouseleave:y[9]||(y[9]=(...e)=>D.stopDrag&&D.stopDrag(...e)),ref:"progressBar"},[t("div",{class:"progress-filled",style:n({width:D.progressPercent+"%"})},null,4),r(t("div",{class:"progress-handle",style:n({left:D.progressPercent+"%"})},null,4),[[a,f.showHandle]])],544),t("div",p,[t("span",c,l(D.formatTime(f.currentTime)),1),y[16]||(y[16]=t("span",{class:"separator"},"/",-1)),t("span",v,l(D.formatTime(f.duration)),1)])],2),[[a,f.duration>0]])],32)}],["__scopeId","data-v-c9a3f15f"]]);export{y as V};
